<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="TBAC Team">
        <link rel="canonical" href="https://businessanalyticscentre.website/showcase/customer-churn/03_data-preparation/03_data-preparation/">
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>Data Preparation - </title>
        <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../../../css/extra.css" rel="stylesheet">

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/django.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../../.."></a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../../roadmap/" class="nav-link">Roadmap</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Team <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../../team/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="https://staffportal.curtin.edu.au/staff/profile/view/nik-thompson-d7141bdd/" class="dropdown-item">Associate Professor Nik Thompson</a>
</li>
                                    
<li>
    <a href="https://staffportal.curtin.edu.au/staff/profile/view/luke-butcher-dc35ec50/" class="dropdown-item">Dr Luke Butcher</a>
</li>
                                    
<li>
    <a href="https://staffportal.curtin.edu.au/staff/profile/view/Michael.Borck/" class="dropdown-item">Dr Michael Borck</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Showcase <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../../discussion-board/discussion-board/" class="dropdown-item">Blackboard Discussion</a>
</li>
                                    
<li>
    <a href="../../../brand-analytics/brand-analytics/" class="dropdown-item">Brand Analytics</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Customer Churn</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../00_crisp-dm/00_crisp-dm/" class="dropdown-item">CRISP-DM Overview</a>
</li>
            
<li>
    <a href="../../01_business-understanding/01_business-understanding/" class="dropdown-item">Business Understanding</a>
</li>
            
<li>
    <a href="../../02_data-understanding/02_data-understanding/" class="dropdown-item">Data Understanding</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Data Preparation</a>
</li>
            
<li>
    <a href="../../04_modeling/04_modeling/" class="dropdown-item">Modeling</a>
</li>
            
<li>
    <a href="../../05_evaluation/05_evaluation/" class="dropdown-item">Evaluation</a>
</li>
            
<li>
    <a href="../../06_deployment/06_deployment/" class="dropdown-item">Deployment</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../../visual-decisions/visual-decisions/" class="dropdown-item">Visual Decisions</a>
</li>
                                    
<li>
    <a href="../../../pca-analysis/pca-analysis/" class="dropdown-item">Automated PCA</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Contact <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="mailto:nik.thompson@curtin.edu.au?subject=Discuss%20Business%20Analytics" class="dropdown-item">A.Prof Nik Thompson</a>
</li>
                                    
<li>
    <a href="mailto:luke.butcher@curtin.edu.au?subject=Discuss%20Business%20Analytics" class="dropdown-item">Dr Luke Butcher</a>
</li>
                                    
<li>
    <a href="mailto:michael.borck@curtin.edu.au?subject=Discuss%20Business%20Analytics" class="dropdown-item">Dr Michael Borck</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../02_data-understanding/02_data-understanding/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../04_modeling/04_modeling/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#data-preparation" class="nav-link">Data Preparation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="data-preparation">Data Preparation</h1>
<p>Stage 3</p>
<p>This phase, which is often referred to as “data munging”, prepares the final
data set(s) for modeling. It has five tasks:</p>
<ul>
<li>Select data: Determine which data sets will be used and document reasons for
  inclusion/exclusion.</li>
<li>Clean data: Often this is the lengthiest task. Without it, you’ll likely fall
  victim to garbage-in, garbage-out. A common practice during this task is to
  correct, impute, or remove erroneous values.</li>
<li>Construct data: Derive new attributes that will be helpful. For example,
  derive someone’s body mass index from height and weight fields.</li>
<li>Integrate data: Create new data sets by combining data from multiple sources.</li>
<li>Format data: Re-format data as necessary. For example, you might convert
  string values that store numbers to numeric values so that you can perform
  mathematical operations.</li>
</ul>
<p>Machine Learning algorithms can typically only have numerical values as their
independent variables. Label encoding is quite pivotal as they encode
categorical labels with appropriate numerical values.  Here we are label
encoding all categorical variables that have unique values.</p>
<pre><code class="language-python">df.dtypes
</code></pre>
<pre><code>gender               object
SeniorCitizen         int64
Partner              object
Dependents           object
tenure                int64
PhoneService         object
MultipleLines        object
InternetService      object
OnlineSecurity       object
OnlineBackup         object
DeviceProtection     object
TechSupport          object
StreamingTV          object
StreamingMovies      object
Contract             object
PaperlessBilling     object
PaymentMethod        object
MonthlyCharges      float64
TotalCharges         object
Churn                object
dtype: object
</code></pre>
<p>Our customer churn data set is clean, no missing values, no nulls, no duplicates
but still needs to be transformed for use by machine learning algorithms. The
following need to be done before one-hot-encoding:</p>
<ul>
<li>Delete the CustomerID column.</li>
<li>The seniorCitizen column only contains two values, 0 or 1.  It is currently
  listed as a numeric type.</li>
<li>The TotalCharges column is a generic type and need to be converted into a
  numeric</li>
<li>Preserve the 'Churn' column as this is the column we are trying to predict.</li>
</ul>
<pre><code class="language-python">del df['customerID']
df['TotalCharges'] = pd.to_numeric(df['TotalCharges'],errors='coerce')
df['TotalCharges'] = df['TotalCharges'].astype(&quot;float&quot;)
df['SeniorCitizen']=pd.Categorical(df['SeniorCitizen'])

df.dtypes
</code></pre>
<pre><code>gender                object
SeniorCitizen       category
Partner               object
Dependents            object
tenure                 int64
PhoneService          object
MultipleLines         object
InternetService       object
OnlineSecurity        object
OnlineBackup          object
DeviceProtection      object
TechSupport           object
StreamingTV           object
StreamingMovies       object
Contract              object
PaperlessBilling      object
PaymentMethod         object
MonthlyCharges       float64
TotalCharges         float64
Churn                 object
dtype: object
</code></pre>
<p>Once all columns are the correct data type then proceed to one-hot-encode.</p>
<pre><code class="language-python">churn = df['Churn']
del df['Churn']
df= pd.get_dummies(df)
df['Churn'] = churn
df.dtypes
</code></pre>
<pre><code>tenure                                       int64
MonthlyCharges                             float64
TotalCharges                               float64
gender_Female                                uint8
gender_Male                                  uint8
SeniorCitizen_0                              uint8
SeniorCitizen_1                              uint8
Partner_No                                   uint8
Partner_Yes                                  uint8
Dependents_No                                uint8
Dependents_Yes                               uint8
PhoneService_No                              uint8
PhoneService_Yes                             uint8
MultipleLines_No                             uint8
MultipleLines_No phone service               uint8
MultipleLines_Yes                            uint8
InternetService_DSL                          uint8
InternetService_Fiber optic                  uint8
InternetService_No                           uint8
OnlineSecurity_No                            uint8
OnlineSecurity_No internet service           uint8
OnlineSecurity_Yes                           uint8
OnlineBackup_No                              uint8
OnlineBackup_No internet service             uint8
OnlineBackup_Yes                             uint8
DeviceProtection_No                          uint8
DeviceProtection_No internet service         uint8
DeviceProtection_Yes                         uint8
TechSupport_No                               uint8
TechSupport_No internet service              uint8
TechSupport_Yes                              uint8
StreamingTV_No                               uint8
StreamingTV_No internet service              uint8
StreamingTV_Yes                              uint8
StreamingMovies_No                           uint8
StreamingMovies_No internet service          uint8
StreamingMovies_Yes                          uint8
Contract_Month-to-month                      uint8
Contract_One year                            uint8
Contract_Two year                            uint8
PaperlessBilling_No                          uint8
PaperlessBilling_Yes                         uint8
PaymentMethod_Bank transfer (automatic)      uint8
PaymentMethod_Credit card (automatic)        uint8
PaymentMethod_Electronic check               uint8
PaymentMethod_Mailed check                   uint8
Churn                                       object
dtype: object
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
